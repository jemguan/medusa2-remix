import{r as t,m as I,V as Le,bM as L,I as xe,x as ct,T as Se,X as ut,ai as pe,z as we,bz as dt,B as he,d9 as mt,b as oe,a6 as gt,u as ft,j as w,H as bt,A as ye,L as vt}from"./index-Br7KcgVZ.js";import{C as Me}from"./checkbox-CuKUmx-V.js";import{f as De,u as pt,g as ht,c as Ae}from"./index-CTi5Aiew.js";import{u as xt}from"./chunk-C76H5USB-snx4tQYu.js";import{u as Et,s as ve,a as Ct}from"./chunk-EPATMX2O-Fnr0vyLv.js";import{C as Z}from"./command-bar-D4WdMclT.js";import{T as V,D as St}from"./table-Oe8J9KZe.js";import{A as wt,a as yt}from"./arrow-up-mini-Dqi2bbQJ.js";import{D as ke}from"./date-picker-DwI7Qf6K.js";import{P as ne}from"./popover-ntoiPHLH.js";var Dt=Object.defineProperty,ae=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,Te=(n,e,a)=>e in n?Dt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,kt=(n,e)=>{for(var a in e||(e={}))Ie.call(e,a)&&Te(n,a,e[a]);if(ae)for(var a of ae(e))$e.call(e,a)&&Te(n,a,e[a]);return n},Tt=(n,e)=>{var a={};for(var l in n)Ie.call(n,l)&&e.indexOf(l)<0&&(a[l]=n[l]);if(n!=null&&ae)for(var l of ae(n))e.indexOf(l)<0&&$e.call(n,l)&&(a[l]=n[l]);return a};const je=t.forwardRef((n,e)=>{var a=n,{color:l="currentColor"}=a,o=Tt(a,["color"]);return t.createElement("svg",kt({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:e},o),t.createElement("path",{stroke:l,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m8.833 12.611-2.666 1.333V7.5L1.944 1.944h11.112L8.833 7.5z"}))});je.displayName="Funnel";function O({className:n,...e}){return t.createElement("div",{className:I("bg-ui-bg-component animate-pulse rounded-md",n),...e})}const Re=t.createContext(null),H=()=>{const n=t.useContext(Re);if(!n)throw new Error("useDataTableContext must be used within a DataTableContextProvider");return n},Oe=n=>{const{instance:e}=H(),a=e.getCommands(),l=e.getRowSelection(),o=Object.keys(l||[]).length,r=a&&a.length>0&&o>0;function u(d){return typeof n.selectedLabel=="function"?n.selectedLabel(d):n.selectedLabel}return!a||a.length===0?null:t.createElement(Z,{open:r},t.createElement(Z.Bar,null,n.selectedLabel&&t.createElement(t.Fragment,null,t.createElement(Z.Value,null,u(o)),t.createElement(Z.Seperator,null)),a.map((d,s)=>t.createElement(t.Fragment,{key:s},t.createElement(Z.Command,{key:d.label,action:()=>d.action(l),label:d.label,shortcut:d.shortcut}),s<a.length-1&&t.createElement(Z.Seperator,null)))))};Oe.displayName="DataTable.CommandBar";const He=n=>{const{instance:e}=H(),a=Object.keys(e.getFiltering()),l=e.getFilters().filter(r=>!a.includes(r.id));if(!a.length&&!l.length)throw new Error("DataTable.FilterMenu was rendered but there are no filters to apply. Make sure to pass filters to 'useDataTable'");const o=n.tooltip?Le:t.Fragment;return e.showSkeleton?t.createElement(Ft,null):t.createElement(L,null,t.createElement(o,{content:n.tooltip,hidden:l.length===0},t.createElement(L.Trigger,{asChild:!0,disabled:l.length===0},t.createElement(xe,{size:"small"},t.createElement(je,null)))),t.createElement(L.Content,{side:"bottom"},l.map(r=>t.createElement(L.Item,{key:r.id,onClick:()=>{e.addFilter({id:r.id,value:void 0})}},r.label))))};He.displayName="DataTable.FilterMenu";const Ft=()=>t.createElement(O,{className:"size-7"}),ze=n=>{const{instance:e}=H();if(!e.enablePagination)throw new Error("DataTable.Pagination was rendered but pagination is not enabled. Make sure to pass pagination to 'useDataTable'");return e.showSkeleton?t.createElement(Nt,null):t.createElement(V.Pagination,{translations:n.translations,className:"flex-shrink-0",canNextPage:e.getCanNextPage(),canPreviousPage:e.getCanPreviousPage(),pageCount:e.getPageCount(),count:e.rowCount,nextPage:e.nextPage,previousPage:e.previousPage,pageIndex:e.pageIndex,pageSize:e.pageSize})};ze.displayName="DataTable.Pagination";const Nt=()=>t.createElement("div",null,t.createElement("div",{className:"flex items-center justify-between p-4"},t.createElement(O,{className:"h-7 w-[138px]"}),t.createElement("div",{className:"flex items-center gap-x-2"},t.createElement(O,{className:"h-7 w-24"}),t.createElement(O,{className:"h-7 w-11"}),t.createElement(O,{className:"h-7 w-11"})))),Be=n=>{const{className:e,...a}=n,{instance:l}=H();if(!l.enableSearch)throw new Error("DataTable.Search was rendered but search is not enabled. Make sure to pass search to 'useDataTable'");return l.showSkeleton?t.createElement(_t,null):t.createElement(ct,{size:"small",type:"search",value:l.getSearch(),onChange:o=>l.onSearchChange(o.target.value),className:I({"pr-[calc(15px+2px+8px)]":l.isLoading},e),...a})};Be.displayName="DataTable.Search";const _t=()=>t.createElement(O,{className:"h-7 w-[128px]"}),Ve=n=>{const{instance:e}=H(),a=e.getAllColumns().filter(s=>s.getCanSort()),l=e.getSorting(),o=t.useMemo(()=>a.find(s=>s.id===(l==null?void 0:l.id)),[a,l]),r=t.useCallback(s=>{e.setSorting(m=>{var i;return{id:s,desc:(i=m==null?void 0:m.desc)!==null&&i!==void 0?i:!1}})},[e]),u=t.useCallback(s=>{e.setSorting(m=>{var i;return{id:(i=m==null?void 0:m.id)!==null&&i!==void 0?i:"",desc:s==="true"}})},[e]);if(!e.enableSorting)throw new Error("DataTable.SortingMenu was rendered but sorting is not enabled. Make sure to pass sorting to 'useDataTable'");if(!a.length)throw new Error("DataTable.SortingMenu was rendered but there are no sortable columns. Make sure to set `enableSorting` to true on at least one column.");if(e.showSkeleton)return t.createElement(Lt,null);const d=n.tooltip?Le:t.Fragment;return t.createElement(L,null,t.createElement(d,{content:n.tooltip},t.createElement(L.Trigger,{asChild:!0},t.createElement(xe,{size:"small"},t.createElement(St,null)))),t.createElement(L.Content,{side:"bottom"},t.createElement(L.RadioGroup,{value:l==null?void 0:l.id,onValueChange:r},a.map(s=>t.createElement(L.RadioItem,{onSelect:m=>m.preventDefault(),value:s.id,key:s.id},Pt(s)))),l&&t.createElement(t.Fragment,null,t.createElement(L.Separator,null),t.createElement(L.RadioGroup,{value:l!=null&&l.desc?"true":"false",onValueChange:u},t.createElement(L.RadioItem,{onSelect:s=>s.preventDefault(),value:"false",className:"flex items-center gap-2"},t.createElement(wt,{className:"text-ui-fg-subtle"}),Fe("asc",o)),t.createElement(L.RadioItem,{onSelect:s=>s.preventDefault(),value:"true",className:"flex items-center gap-2"},t.createElement(yt,{className:"text-ui-fg-subtle"}),Fe("desc",o))))))};Ve.displayName="DataTable.SortingMenu";function Pt(n){var e,a,l;const o=n.columnDef.meta;let r;return typeof n.columnDef.header=="string"&&(r=n.columnDef.header),(l=(a=(e=o==null?void 0:o.___sortMetaData)===null||e===void 0?void 0:e.sortLabel)!==null&&a!==void 0?a:r)!==null&&l!==void 0?l:n.id}function Fe(n,e){var a,l,o,r;if(!e)return null;const u=e.columnDef.meta;switch(n){case"asc":return(l=(a=u==null?void 0:u.___sortMetaData)===null||a===void 0?void 0:a.sortAscLabel)!==null&&l!==void 0?l:"A-Z";case"desc":return(r=(o=u==null?void 0:u.___sortMetaData)===null||o===void 0?void 0:o.sortDescLabel)!==null&&r!==void 0?r:"Z-A"}}const Lt=()=>t.createElement(O,{className:"size-7"});var U;(function(n){n.EMPTY="EMPTY",n.FILTERED_EMPTY="FILTERED_EMPTY",n.POPULATED="POPULATED"})(U||(U={}));const Ue=n=>{const e=n.direction==="asc",a=n.direction==="desc",l=e||a;return t.createElement("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:I("opacity-0 transition-opacity group-hover:opacity-100",{"opacity-100":l})},t.createElement("path",{d:"M5.82651 5.75C5.66344 5.74994 5.50339 5.71269 5.36308 5.64216C5.22277 5.57162 5.10736 5.47039 5.02891 5.34904C4.95045 5.22769 4.91184 5.09067 4.9171 4.95232C4.92236 4.81397 4.97131 4.67936 5.05882 4.56255L7.64833 1.10788C7.73055 0.998207 7.84403 0.907911 7.97827 0.845354C8.11252 0.782797 8.26318 0.75 8.41632 0.75C8.56946 0.75 8.72013 0.782797 8.85437 0.845354C8.98862 0.907911 9.1021 0.998207 9.18432 1.10788L11.7744 4.56255C11.862 4.67939 11.9109 4.81405 11.9162 4.95245C11.9214 5.09085 11.8827 5.2279 11.8042 5.34926C11.7257 5.47063 11.6102 5.57185 11.4698 5.64235C11.3294 5.71285 11.1693 5.75003 11.0061 5.75H5.82651Z",className:I("fill-ui-fg-muted",{"fill-ui-fg-subtle":e})}),t.createElement("path",{d:"M11.0067 9.25C11.1698 9.25006 11.3299 9.28731 11.4702 9.35784C11.6105 9.42838 11.7259 9.52961 11.8043 9.65096C11.8828 9.77231 11.9214 9.90933 11.9162 10.0477C11.9109 10.186 11.8619 10.3206 11.7744 10.4374L9.18492 13.8921C9.10271 14.0018 8.98922 14.0921 8.85498 14.1546C8.72074 14.2172 8.57007 14.25 8.41693 14.25C8.26379 14.25 8.11312 14.2172 7.97888 14.1546C7.84464 14.0921 7.73115 14.0018 7.64894 13.8921L5.05882 10.4374C4.97128 10.3206 4.92233 10.1859 4.9171 10.0476C4.91186 9.90915 4.95053 9.7721 5.02905 9.65074C5.10758 9.52937 5.22308 9.42815 5.36347 9.35765C5.50387 9.28715 5.664 9.24997 5.82712 9.25H11.0067Z",className:I("fill-ui-fg-muted",{"fill-ui-fg-subtle":a})}))};Ue.displayName="DataTable.SortingIcon";const Ke=n=>{const[e,a]=t.useState(null),l=t.useRef(!1),[o,r]=t.useState(!1),u=t.useRef(null),{instance:d}=H(),s=d.pageIndex,m=d.getAllColumns(),i=m.find(v=>v.id==="select"),E=m.find(v=>v.id==="action");t.useEffect(()=>{const v=C=>{const x=$t();if(C.key.toLowerCase()==="x"&&e&&!l.current&&!x){l.current=!0;const y=d.getRowModel().rows.find(S=>S.id===e);y&&y.getCanSelect()&&y.toggleSelected()}},g=C=>{C.key.toLowerCase()==="x"&&(l.current=!1)};return document.addEventListener("keydown",v),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",g)}},[e,d]);const j=v=>{v.currentTarget.scrollLeft>0?r(!0):r(!1)};return t.useEffect(()=>{var v;(v=u.current)===null||v===void 0||v.scroll({top:0,left:0})},[s]),d.showSkeleton?t.createElement(It,{pageSize:d.pageSize}):t.createElement("div",{className:"flex w-full flex-1 flex-col overflow-hidden"},d.emptyState===U.POPULATED&&t.createElement("div",{ref:u,onScroll:j,className:"min-h-0 w-full flex-1 overflow-auto overscroll-none border-y"},t.createElement(V,{className:"relative isolate w-full"},t.createElement(V.Header,{className:"shadow-ui-border-base sticky inset-x-0 top-0 z-[1] w-full border-b-0 border-t-0 shadow-[0_1px_1px_0]",style:{transform:"translate3d(0,0,0)"}},d.getHeaderGroups().map(v=>t.createElement(V.Row,{key:v.id,className:I("border-b-0",{"[&_th:last-of-type]:w-[1%] [&_th:last-of-type]:whitespace-nowrap":E,"[&_th:first-of-type]:w-[1%] [&_th:first-of-type]:whitespace-nowrap":i})},v.headers.map((g,C)=>{const x=g.column.getCanSort(),y=g.column.getIsSorted(),S=g.column.getToggleSortingHandler(),D=g.id==="action",k=g.id==="select",h=D||k,P=x?"button":"div",c=i?C===1:C===0;return t.createElement(V.HeaderCell,{key:g.id,className:I("whitespace-nowrap",{"w-[calc(20px+24px+24px)] min-w-[calc(20px+24px+24px)] max-w-[calc(20px+24px+24px)]":k,"w-[calc(28px+24px+4px)] min-w-[calc(28px+24px+4px)] max-w-[calc(28px+24px+4px)]":D,"after:absolute after:inset-y-0 after:right-0 after:h-full after:w-px after:bg-transparent after:content-['']":c,"after:bg-ui-border-base":o&&c,"bg-ui-bg-subtle sticky":c||k,"left-0":k||c&&!i,"left-[calc(20px+24px+24px)]":c&&i}),style:h?void 0:{width:g.column.columnDef.size,maxWidth:g.column.columnDef.maxSize,minWidth:g.column.columnDef.minSize}},t.createElement(P,{type:x?"button":void 0,onClick:x?S:void 0,className:I("group flex w-fit cursor-default items-center gap-2",{"cursor-pointer":x})},De(g.column.columnDef.header,g.getContext()),x&&t.createElement(Ue,{direction:y})))})))),t.createElement(V.Body,{className:"border-b-0 border-t-0"},d.getRowModel().rows.map(v=>t.createElement(V.Row,{key:v.id,onMouseEnter:()=>a(v.id),onMouseLeave:()=>a(null),onClick:g=>{var C;return(C=d.onRowClick)===null||C===void 0?void 0:C.call(d,g,v)},className:I("group/row last:border-b-0",{"cursor-pointer":!!d.onRowClick})},v.getVisibleCells().map((g,C)=>{const x=g.column.id==="select",y=g.column.id==="action",S=x||y,D=i?C===1:C===0;return t.createElement(V.Cell,{key:g.id,className:I("items-stretch truncate whitespace-nowrap",{"w-[calc(20px+24px+24px)] min-w-[calc(20px+24px+24px)] max-w-[calc(20px+24px+24px)]":x,"w-[calc(28px+24px+4px)] min-w-[calc(28px+24px+4px)] max-w-[calc(28px+24px+4px)]":y,"bg-ui-bg-base group-hover/row:bg-ui-bg-base-hover transition-fg sticky h-full":D||x,"after:absolute after:inset-y-0 after:right-0 after:h-full after:w-px after:bg-transparent after:content-['']":D,"after:bg-ui-border-base":o&&D,"left-0":x||D&&!i,"left-[calc(20px+24px+24px)]":D&&i}),style:S?void 0:{width:g.column.columnDef.size,maxWidth:g.column.columnDef.maxSize,minWidth:g.column.columnDef.minSize}},De(g.column.columnDef.cell,g.getContext()))})))))),t.createElement(At,{state:d.emptyState,props:n.emptyState}))};Ke.displayName="DataTable.Table";const Mt=({heading:n,description:e})=>t.createElement("div",{className:"flex size-full flex-col items-center justify-center gap-2"},t.createElement(Se,{size:"base",weight:"plus"},n),t.createElement(Se,null,e)),At=({state:n,props:e})=>{var a;if(n===U.POPULATED)return null;const l=n===U.EMPTY?e==null?void 0:e.empty:e==null?void 0:e.filtered;return t.createElement("div",{className:"flex min-h-[250px] w-full flex-col items-center justify-center border-y px-6 py-4"},(a=l==null?void 0:l.custom)!==null&&a!==void 0?a:t.createElement(Mt,{heading:l==null?void 0:l.heading,description:l==null?void 0:l.description}))},It=({pageSize:n=10})=>t.createElement("div",{className:"flex w-full flex-1 flex-col overflow-hidden"},t.createElement("div",{className:"min-h-0 w-full flex-1 overscroll-none border-y"},t.createElement("div",{className:"flex flex-col divide-y"},t.createElement(O,{className:"h-12 w-full"}),Array.from({length:n},(e,a)=>a).map(e=>t.createElement(O,{key:e,className:"h-12 w-full rounded-none"})))));function $t(){const n=document?document.activeElement:null;return n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||(n==null?void 0:n.getAttribute("contenteditable"))==="true"}function Ne(n){if(typeof n!="object"||n===null)return!1;const e=["$gte","$lte","$gt","$lt"],a=e.some(o=>o in n),l=Object.entries(n).every(([o,r])=>e.includes(o)&&(typeof r=="string"||r===void 0));return a&&l}const jt=n=>n.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),Rt="Custom",We="Starting",Ye="Ending",Je=({id:n,filter:e})=>{const{instance:a}=H(),[l,o]=t.useState(e===void 0),[r,u]=t.useState(!1),d=t.useCallback(x=>{!x&&(!e||Array.isArray(e)&&e.length===0)&&a.removeFilter(n),o(x)},[a,n,e]),s=t.useCallback(()=>{a.removeFilter(n)},[a,n]),m=a.getFilterMeta(n),{type:i,options:E,label:j,...v}=m??{},{displayValue:g,isCustomRange:C}=t.useMemo(()=>{var x,y,S,D,k;let h=null,P=!1;if(typeof e=="string"&&(h=(y=(x=E==null?void 0:E.find(c=>c.value===e))===null||x===void 0?void 0:x.label)!==null&&y!==void 0?y:null),Array.isArray(e)&&(h=(S=e.map(c=>{var F;return(F=E==null?void 0:E.find($=>$.value===c))===null||F===void 0?void 0:F.label}).join(", "))!==null&&S!==void 0?S:null),Ne(e)&&(h=(k=(D=E==null?void 0:E.find(c=>Ne(c.value)?!r&&(e.$gte===c.value.$gte||!e.$gte&&!c.value.$gte)&&(e.$lte===c.value.$lte||!e.$lte&&!c.value.$lte)&&(e.$gt===c.value.$gt||!e.$gt&&!c.value.$gt)&&(e.$lt===c.value.$lt||!e.$lt&&!c.value.$lt):!1))===null||D===void 0?void 0:D.label)!==null&&k!==void 0?k:null,!h&&Bt(m))){const c=m.formatDateValue?m.formatDateValue:jt;e.$gte&&!e.$lte&&(P=!0,h=`${m.rangeOptionStartLabel||We} ${c(new Date(e.$gte))}`),e.$lte&&!e.$gte&&(P=!0,h=`${m.rangeOptionEndLabel||Ye} ${c(new Date(e.$lte))}`),e.$gte&&e.$lte&&(P=!0,h=`${c(new Date(e.$gte))} - ${c(new Date(e.$lte))}`)}return{displayValue:h,isCustomRange:P}},[e,E]);return t.useEffect(()=>{C&&!r&&u(!0)},[C,r]),m?t.createElement(ne,{open:l,onOpenChange:d,modal:!0},t.createElement(ne.Anchor,{asChild:!0},t.createElement("div",{className:I("bg-ui-bg-component flex flex-shrink-0 items-center overflow-hidden rounded-md","[&>*]:txt-compact-small-plus [&>*]:flex [&>*]:items-center [&>*]:justify-center",{"shadow-borders-base divide-x":g,"border border-dashed":!g})},g&&t.createElement("div",{className:"text-ui-fg-muted whitespace-nowrap px-2 py-1"},j||n),t.createElement(ne.Trigger,{className:I("text-ui-fg-subtle hover:bg-ui-bg-base-hover active:bg-ui-bg-base-pressed transition-fg whitespace-nowrap px-2 py-1 outline-none",{"text-ui-fg-muted":!g})},g||j||n),g&&t.createElement("button",{type:"button",className:"text-ui-fg-muted hover:bg-ui-bg-base-hover active:bg-ui-bg-base-pressed transition-fg size-7 outline-none",onClick:s},t.createElement(ut,null)))),t.createElement(ne.Content,{align:"start",className:"bg-ui-bg-component p-0 outline-none"},(()=>{switch(i){case"select":return t.createElement(Ht,{id:n,filter:e,options:E});case"radio":return t.createElement(zt,{id:n,filter:e,options:E});case"date":return t.createElement(Ot,{id:n,filter:e,options:E,isCustom:r,setIsCustom:u,...v});default:return null}})())):null};Je.displayName="DataTable.Filter";const Ot=({id:n,filter:e,options:a,format:l="date",rangeOptionLabel:o=Rt,rangeOptionStartLabel:r=We,rangeOptionEndLabel:u=Ye,disableRangeOption:d=!1,isCustom:s,setIsCustom:m})=>{const i=e,{instance:E}=H(),j=t.useMemo(()=>{if(!(!i||s))return JSON.stringify(i)},[i,s]),v=t.useCallback(c=>{m(!1);const F=JSON.parse(c);E.updateFilter({id:n,value:F})},[E,n]),g=t.useCallback(()=>{m(!0),E.updateFilter({id:n,value:void 0})},[E,n]),C=t.useCallback((c,F)=>{const $={...i};$[c]=F?F.toISOString():void 0,E.updateFilter({id:n,value:$})},[E,n]),{focusedIndex:x,setFocusedIndex:y}=Ee(a,c=>{c===a.length&&!d?g():v(JSON.stringify(a[c].value))},d?0:1),S=l==="date-time"?"minute":"day",D=i!=null&&i.$lte?S==="minute"?new Date(i.$lte):new Date(new Date(i.$lte).setHours(23,59,59,999)):void 0,k=i!=null&&i.$gte?S==="minute"?new Date(i.$gte):new Date(new Date(i.$gte).setHours(0,0,0,0)):void 0,h=s?a.length:0,P=t.useCallback(()=>{x===-1&&y(h)},[x,h]);return t.createElement(t.Fragment,null,t.createElement("div",{className:"flex flex-col p-1 outline-none",tabIndex:0,role:"list",onFocus:P,autoFocus:!0},a.map((c,F)=>{const $=JSON.stringify(c.value),N=j===$;return t.createElement(le,{key:F,index:F,option:c,isSelected:N,isFocused:x===F,onClick:()=>v($),onMouseEvent:y,icon:pe})}),!d&&t.createElement(le,{index:a.length,option:{label:o,value:"__custom"},icon:pe,isSelected:s,isFocused:x===a.length,onClick:g,onMouseEvent:y})),!d&&s&&t.createElement(t.Fragment,null,t.createElement("div",{className:"flex flex-col py-[3px]"},t.createElement("div",{className:"bg-ui-border-menu-top h-px w-full"}),t.createElement("div",{className:"bg-ui-border-menu-bot h-px w-full"})),t.createElement("div",{className:"flex flex-col gap-2 px-2 pb-3 pt-1"},t.createElement("div",{className:"flex flex-col gap-1"},t.createElement(we,{id:"custom-start-date-label",size:"xsmall",weight:"plus"},r),t.createElement(ke,{"aria-labelledby":"custom-start-date-label",granularity:S,maxValue:D,value:i!=null&&i.$gte?new Date(i.$gte):null,onChange:c=>C("$gte",c)})),t.createElement("div",{className:"flex flex-col gap-1"},t.createElement(we,{id:"custom-end-date-label",size:"xsmall",weight:"plus"},u),t.createElement(ke,{"aria-labelledby":"custom-end-date-label",granularity:S,minValue:k,value:i!=null&&i.$lte?new Date(i.$lte):null,onChange:c=>C("$lte",c)})))))},Ht=({id:n,filter:e=[],options:a})=>{const{instance:l}=H(),o=t.useCallback(s=>{if(e!=null&&e.includes(s)){const m=e==null?void 0:e.filter(i=>i!==s);l.updateFilter({id:n,value:m})}else l.updateFilter({id:n,value:[...e??[],s]})},[l,n,e]),{focusedIndex:r,setFocusedIndex:u}=Ee(a,s=>o(a[s].value)),d=t.useCallback(()=>{r===-1&&u(0)},[r]);return t.createElement("div",{className:"flex flex-col p-1 outline-none",role:"list",tabIndex:0,onFocus:d,autoFocus:!0},a.map((s,m)=>{const i=!!(e!=null&&e.includes(s.value));return t.createElement(le,{key:m,index:m,option:s,isSelected:i,isFocused:r===m,onClick:()=>o(s.value),onMouseEvent:u,icon:dt})}))},zt=({id:n,filter:e,options:a})=>{const{instance:l}=H(),o=t.useCallback(s=>{l.updateFilter({id:n,value:s})},[l,n]),{focusedIndex:r,setFocusedIndex:u}=Ee(a,s=>o(a[s].value)),d=t.useCallback(()=>{r===-1&&u(0)},[r]);return t.createElement("div",{className:"flex flex-col p-1 outline-none",role:"list",tabIndex:0,onFocus:d,autoFocus:!0},a.map((s,m)=>{const i=e===s.value;return t.createElement(le,{key:m,index:m,option:s,isSelected:i,isFocused:r===m,onClick:()=>o(s.value),onMouseEvent:u,icon:pe})}))};function Bt(n){return n?n.type==="date":!1}const le=t.memo(({index:n,option:e,isSelected:a,isFocused:l,onClick:o,onMouseEvent:r,icon:u})=>t.createElement("button",{type:"button",role:"listitem",className:I("bg-ui-bg-component txt-compact-small transition-fg flex items-center gap-2 rounded px-2 py-1 outline-none",{"bg-ui-bg-component-hover":l}),onClick:o,onMouseEnter:()=>r(n),onMouseLeave:()=>r(-1),tabIndex:-1},t.createElement("div",{className:"flex size-[15px] items-center justify-center"},a&&t.createElement(u,null)),t.createElement("span",null,e.label)));function Ee(n,e,a=0){const[l,o]=t.useState(-1),r=t.useCallback(u=>{const d=n.length+a;if(document.activeElement.contentEditable!=="true")switch(u.key){case"ArrowDown":u.preventDefault(),o(s=>s<d-1?s+1:s);break;case"ArrowUp":u.preventDefault(),o(s=>s>0?s-1:s);break;case" ":case"Enter":u.preventDefault(),l>=0&&e(l);break}},[n.length,a,l,e]);return t.useEffect(()=>(window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}),[r]),{focusedIndex:l,setFocusedIndex:o}}const qe=({clearAllFiltersLabel:n="Clear all"})=>{const{instance:e}=H(),a=e.getFiltering(),l=t.useCallback(()=>{e.clearFilters()},[e]),o=Object.keys(a).length;return o===0?null:e.showSkeleton?t.createElement(Vt,{filterCount:o}):t.createElement("div",{className:"bg-ui-bg-subtle flex w-full flex-nowrap items-center gap-2 overflow-x-auto border-t px-6 py-2 md:flex-wrap"},Object.entries(a).map(([r,u])=>t.createElement(Je,{key:r,id:r,filter:u})),o>0?t.createElement(he,{variant:"transparent",size:"small",className:"text-ui-fg-muted hover:text-ui-fg-subtle flex-shrink-0 whitespace-nowrap",type:"button",onClick:l},n):null)};qe.displayName="DataTable.FilterBar";const Vt=({filterCount:n})=>t.createElement("div",{className:"bg-ui-bg-subtle flex w-full flex-nowrap items-center gap-2 overflow-x-auto border-t px-6 py-2 md:flex-wrap"},Array.from({length:n}).map((e,a)=>t.createElement(O,{key:a,className:"h-7 w-[180px]"})),n>0?t.createElement(O,{className:"h-7 w-[66px]"}):null),Ut=n=>{var e;return t.createElement("div",{className:"flex flex-col divide-y"},t.createElement("div",{className:I("flex items-center px-6 py-4",n.className)},n.children),t.createElement(qe,{clearAllFiltersLabel:(e=n.translations)===null||e===void 0?void 0:e.clearAll}))},Kt=({instance:n,children:e})=>t.createElement(Re.Provider,{value:{instance:n}},e),Ze=({instance:n,children:e,className:a})=>t.createElement(Kt,{instance:n},t.createElement("div",{className:I("relative flex min-h-0 flex-1 flex-col",a)},e));Ze.displayName="DataTable";const z=Object.assign(Ze,{Table:Ke,Toolbar:Ut,Search:Be,SortingMenu:Ve,FilterMenu:He,Pagination:ze,CommandBar:Oe}),Wt=({rowCount:n=0,filters:e,commands:a,rowSelection:l,sorting:o,filtering:r,pagination:u,search:d,onRowClick:s,autoResetPageIndex:m=!0,isLoading:i=!1,...E})=>{var j,v,g,C,x,y;const{state:S,onSortingChange:D}=o??{},{state:k,onFilteringChange:h}=r??{},{state:P,onPaginationChange:c}=u??{},{state:F,onRowSelectionChange:$}=l??{},N=t.useCallback(()=>m?()=>P&&(c==null?void 0:c({...P,pageIndex:0})):void 0,[m,P,c]),re=t.useCallback(()=>D?f=>{var b;(b=N())===null||b===void 0||b(),Yt(D,S)(f)}:void 0,[D,S,N]),Ce=t.useCallback(()=>$?f=>{var b;(b=N())===null||b===void 0||b(),Jt($,F)(f)}:void 0,[$,F,N]),Y=t.useCallback(()=>h?f=>{var b;(b=N())===null||b===void 0||b(),qt(h,k)(f)}:void 0,[h,k,N]),se=t.useCallback(()=>c?Zt(c,P):void 0,[c,P]),T=pt({...E,getCoreRowModel:ht(),state:{rowSelection:F??{},sorting:S?[S]:void 0,columnFilters:Object.entries(k??{}).map(([f,b])=>({id:f,value:b})),pagination:P},rowCount:n,onColumnFiltersChange:Y(),onRowSelectionChange:Ce(),onSortingChange:re(),onPaginationChange:se(),manualSorting:!0,manualPagination:!0,manualFiltering:!0}),ie=t.useCallback(()=>{var f,b;return(b=(f=T.getState().sorting)===null||f===void 0?void 0:f[0])!==null&&b!==void 0?b:null},[T]),ce=t.useCallback(f=>{var b,A,be;const st=(A=(b=T.getState().sorting)===null||b===void 0?void 0:b[0])!==null&&A!==void 0?A:null,it=typeof f=="function"?f(st):f;(be=N())===null||be===void 0||be(),T.setSorting([it])},[T,N]),K=t.useCallback(()=>e??[],[e]),ue=t.useCallback(f=>{const b=K().find(A=>A.id===f);return b?b.options:null},[K]),de=t.useCallback(f=>K().find(b=>b.id===f)||null,[K]),W=t.useCallback(()=>{var f;const b=(f=T.getState().columnFilters)!==null&&f!==void 0?f:[];return Object.fromEntries(b.map(A=>[A.id,A.value]))},[T]),G=t.useCallback(f=>{var b;f.value&&((b=N())===null||b===void 0||b()),h==null||h({...W(),[f.id]:f.value})},[h,W,N]),me=t.useCallback(f=>{var b;const A=W();delete A[f],(b=N())===null||b===void 0||b(),h==null||h(A)},[h,W,N]),ge=t.useCallback(()=>{var f;(f=N())===null||f===void 0||f(),h==null||h({})},[h,N]),fe=t.useCallback(f=>{G(f)},[G]),{state:R,onSearchChange:J,debounce:q=300}=d??{},[Q,X]=t.useState(R??""),p=t.useRef();t.useEffect(()=>{X(R??"")},[R]);const _=t.useCallback(()=>Q,[Q]),M=t.useMemo(()=>{if(J)return f=>{var b;if(p.current&&clearTimeout(p.current),q<=0){(b=N())===null||b===void 0||b(),J(f);return}p.current=setTimeout(()=>{var A;(A=N())===null||A===void 0||A(),J(f)},q)}},[J,q,N]);t.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]);const ee=t.useCallback(f=>{X(f),M==null||M(f)},[M]),Xe=t.useCallback(()=>a??[],[a]),et=t.useCallback(()=>T.getState().rowSelection,[T]),te=T.getRowModel().rows,tt=t.useMemo(()=>{const f=te.length>0,b=!!R,A=Object.keys(k??{}).length>0;return f?U.POPULATED:b||A?U.FILTERED_EMPTY:U.EMPTY},[te,R,k]),nt=t.useMemo(()=>i===!0&&te.length===0,[i,te]),at=!!u,lt=!!r,ot=!!o,rt=!!d;return{getHeaderGroups:T.getHeaderGroups,getRowModel:T.getRowModel,getAllColumns:T.getAllColumns,enablePagination:at,getCanNextPage:T.getCanNextPage,getCanPreviousPage:T.getCanPreviousPage,nextPage:T.nextPage,previousPage:T.previousPage,getPageCount:T.getPageCount,pageIndex:(g=(v=(j=T.getState())===null||j===void 0?void 0:j.pagination)===null||v===void 0?void 0:v.pageIndex)!==null&&g!==void 0?g:0,pageSize:(y=(x=(C=T.getState())===null||C===void 0?void 0:C.pagination)===null||x===void 0?void 0:x.pageSize)!==null&&y!==void 0?y:10,rowCount:n,enableSearch:rt,getSearch:_,onSearchChange:ee,enableSorting:ot,getSorting:ie,setSorting:ce,enableFiltering:lt,getFilters:K,getFilterOptions:ue,getFilterMeta:de,getFiltering:W,addFilter:G,removeFilter:me,clearFilters:ge,updateFilter:fe,getCommands:Xe,getRowSelection:et,onRowClick:s,emptyState:tt,isLoading:i,showSkeleton:nt}};function Yt(n,e){return a=>{const o=(typeof a=="function"?a(e?[e]:[]):a)[0];n(o)}}function Jt(n,e){return a=>{const l=typeof a=="function"?a(e??{}):a;n(l)}}function qt(n,e){return a=>{const l=typeof a=="function"?a(Object.entries(e??{}).map(([r,u])=>({id:r,value:u}))):a,o=Object.fromEntries(l.map(r=>[r.id,r]));n(o)}}function Zt(n,e){return a=>{const l=typeof a=="function"?a(e??{pageIndex:0,pageSize:10}):a;n(l)}}const Ge=({ctx:n})=>{const e=n.column.columnDef.meta,a=e==null?void 0:e.___actions;if(!a)return null;const l=typeof a=="function"?a(n):a;return Array.isArray(l)?t.createElement(L,null,t.createElement(L.Trigger,{asChild:!0,className:"ml-1"},t.createElement(xe,{size:"small",variant:"transparent"},t.createElement(mt,null))),t.createElement(L.Content,{side:"bottom"},l.map((o,r)=>{const u=Array.isArray(o),d=r===l.length-1;return u?t.createElement(t.Fragment,{key:r},o.map(s=>t.createElement(L.Item,{key:s.label,onClick:m=>{m.stopPropagation(),s.onClick(n)},className:"[&>svg]:text-ui-fg-subtle flex items-center gap-2"},s.icon,s.label)),!d&&t.createElement(L.Separator,null)):t.createElement(L.Item,{key:o.label,onClick:s=>{s.stopPropagation(),o.onClick(n)},className:"[&>svg]:text-ui-fg-subtle flex items-center gap-2"},o.icon,o.label)}))):null};Ge.displayName="DataTable.ActionCell";const Qe=n=>{const e=n.ctx.row.getIsSelected(),a=n.ctx.row.getToggleSelectedHandler();return t.createElement(Me,{onClick:l=>l.stopPropagation(),checked:e,onCheckedChange:a})};Qe.displayName="DataTable.SelectCell";const Gt=n=>{const e=n.ctx.table.getIsSomePageRowsSelected()?"indeterminate":n.ctx.table.getIsAllPageRowsSelected(),a=l=>{n.ctx.table.toggleAllPageRowsSelected(!!l)};return t.createElement(Me,{onClick:l=>l.stopPropagation(),checked:e,onCheckedChange:a})},hn=()=>{const{accessor:n,display:e}=Ae();return{accessor:(a,l)=>{const{sortLabel:o,sortAscLabel:r,sortDescLabel:u,meta:d,enableSorting:s,...m}=l,i={___sortMetaData:{sortLabel:o,sortAscLabel:r,sortDescLabel:u},...d||{}};return n(a,{...m,enableSorting:s??!1,meta:i})},display:e,action:({actions:a,...l})=>e({id:"action",cell:o=>t.createElement(Ge,{ctx:o}),meta:{___actions:a,...l.meta||{}},...l}),select:a=>e({id:"select",header:a!=null&&a.header?a.header:l=>t.createElement(Gt,{ctx:l}),cell:a!=null&&a.cell?a.cell:l=>t.createElement(Qe,{ctx:l})})}},Qt=Ae();Qt.accessor("name",{meta:{}});const Xt=()=>({accessor:(n,e)=>({id:n,...e}),custom:n=>n});var xn=({data:n=[],columns:e,filters:a,commands:l,action:o,actionMenu:r,getRowId:u,rowCount:d=0,enablePagination:s=!0,enableSearch:m=!0,autoFocusSearch:i=!1,rowHref:E,heading:j,prefix:v,pageSize:g=10,emptyState:C,rowSelection:x,isLoading:y=!1})=>{const{t:S}=oe(),D=a&&a.length>0,k=l&&l.length>0,h=e.some(p=>p.enableSorting),P=(a==null?void 0:a.map(p=>p.id))??[],c=P.map(p=>B(p,v)),{offset:F,order:$,q:N,...re}=xt([...P,...h?["order"]:[],...m?["q"]:[],...s?["offset"]:[]],v),[Ce,Y]=gt(),[se,T]=t.useState(N??""),ie=p=>{T(p),Y(_=>(p?_.set(B("q",v),p):_.delete(B("q",v)),_))},[ce,K]=t.useState(F?an(F,g):{pageIndex:0,pageSize:g}),ue=p=>{K(p),Y(_=>(p.pageIndex===0?_.delete(B("offset",v)):_.set(B("offset",v),nn(p).toString()),_))},[de,W]=t.useState(ln(P,re)),G=p=>{W(p),Y(_=>(Array.from(_.keys()).forEach(M=>{c.includes(M)&&!(M in p)&&_.delete(M)}),Object.entries(p).forEach(([M,ee])=>{c.includes(B(M,v))&&ee&&_.set(B(M,v),JSON.stringify(ee))}),_))},[me,ge]=t.useState($?tn($):null),fe=p=>{ge(p),Y(_=>{if(p){const M=en(p);_.set(B("order",v),M)}else _.delete(B("order",v));return _})},{pagination:R,toolbar:J}=on(),q=ft(),Q=t.useCallback((p,_)=>{if(!E)return;const M=E(_);if(p.metaKey||p.ctrlKey||p.button===1){window.open(M,"_blank","noreferrer");return}if(p.shiftKey){window.open(M,void 0,"noreferrer");return}q(M)},[q,E]),X=Wt({data:n,columns:e,filters:a,commands:l,rowCount:d,getRowId:u,onRowClick:E?Q:void 0,pagination:s?{state:ce,onPaginationChange:ue}:void 0,filtering:D?{state:de,onFilteringChange:G}:void 0,sorting:h?{state:me,onSortingChange:fe}:void 0,search:m?{state:se,onSearchChange:ie}:void 0,rowSelection:x,isLoading:y});return w.jsxs(z,{instance:X,children:[w.jsxs(z.Toolbar,{className:"flex flex-col items-start justify-between gap-2 md:flex-row md:items-center",translations:J,children:[w.jsxs("div",{className:"flex w-full items-center justify-between",children:[w.jsx(bt,{children:j}),w.jsxs("div",{className:"flex items-center justify-end gap-x-2 md:hidden",children:[D&&w.jsx(z.FilterMenu,{tooltip:S("filters.filterLabel")}),w.jsx(z.SortingMenu,{tooltip:S("filters.sortLabel")}),r&&w.jsx(ye,{variant:"primary",...r}),o&&w.jsx(_e,{...o})]})]}),w.jsxs("div",{className:"flex w-full items-center gap-2 md:justify-end",children:[m&&w.jsx("div",{className:"w-full md:w-auto",children:w.jsx(z.Search,{placeholder:S("filters.searchLabel"),autoFocus:i})}),w.jsxs("div",{className:"hidden items-center gap-x-2 md:flex",children:[D&&w.jsx(z.FilterMenu,{tooltip:S("filters.filterLabel")}),w.jsx(z.SortingMenu,{tooltip:S("filters.sortLabel")}),r&&w.jsx(ye,{variant:"primary",...r}),o&&w.jsx(_e,{...o})]})]})]}),w.jsx(z.Table,{emptyState:C}),s&&w.jsx(z.Pagination,{translations:R}),k&&w.jsx(z.CommandBar,{selectedLabel:p=>`${p} selected`})]})};function en(n){return n.desc?`-${n.id}`:n.id}function tn(n){return n.startsWith("-")?{id:n.slice(1),desc:!0}:{id:n,desc:!1}}function nn(n){return n.pageIndex*n.pageSize}function an(n,e){const a=parseInt(n);return{pageIndex:Math.floor(a/e),pageSize:e}}function ln(n,e){if(!e)return{};const a={};for(const l of n){const o=e[l];o&&(a[l]=JSON.parse(o))}return a}function B(n,e){return e?`${e}_${n}`:n}var on=()=>{const{t:n}=oe(),e={of:n("general.of"),results:n("general.results"),pages:n("general.pages"),prev:n("general.prev"),next:n("general.next")},a={clearAll:n("actions.clearAll")};return{pagination:e,toolbar:a}},_e=({label:n,disabled:e,...a})=>{const l={size:"small",disabled:e??!1,type:"button",variant:"secondary"};return"to"in a?w.jsx(he,{...l,asChild:!0,children:w.jsx(vt,{to:a.to,children:n})}):w.jsx(he,{...l,onClick:a.onClick,children:n})},Pe=Xt(),rn=()=>{const{t:n}=oe(),e=t.useMemo(()=>{const a=new Date;return a.setHours(0,0,0,0),a},[]);return t.useMemo(()=>[{label:n("filters.date.today"),value:{$gte:e.toISOString()}},{label:n("filters.date.lastSevenDays"),value:{$gte:ve(e,7).toISOString()}},{label:n("filters.date.lastThirtyDays"),value:{$gte:ve(e,30).toISOString()}},{label:n("filters.date.lastNinetyDays"),value:{$gte:ve(e,90).toISOString()}},{label:n("filters.date.lastTwelveMonths"),value:{$gte:Ct(e,12).toISOString()}}],[e,n])},En=n=>{const{t:e}=oe(),{getFullDate:a}=Et(),l=rn(),o=t.useMemo(()=>({rangeOptionStartLabel:e("filters.date.starting"),rangeOptionEndLabel:e("filters.date.ending"),rangeOptionLabel:e("filters.date.custom"),options:l}),[n,e,l]);return t.useMemo(()=>[Pe.accessor("created_at",{type:"date",label:e("fields.createdAt"),format:"date",formatDateValue:r=>a({date:r}),options:l,...o}),Pe.accessor("updated_at",{type:"date",label:e("fields.updatedAt"),format:"date",formatDateValue:r=>a({date:r}),options:l,...o})],[e,l,a,o])};export{xn as D,Xt as a,hn as c,En as u};
